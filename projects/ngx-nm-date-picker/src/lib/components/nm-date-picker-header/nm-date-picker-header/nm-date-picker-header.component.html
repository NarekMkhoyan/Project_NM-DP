<div class="nm_date-picker-header" nmTrigger [style.width.px]="pickerBodyWidth" *ngIf="headerActions">
  <ng-container *ngIf="customHeaderTpl; else defaultHeaderTpl">
    <ng-container *ngTemplateOutlet="customHeaderTpl"></ng-container>
  </ng-container>
  <ng-template #defaultHeaderTpl>
    <ng-container [ngSwitch]="currentPickerMode$ | async">
      <ng-container *ngSwitchCase="'date'">
        <ng-container *ngTemplateOutlet="dateModeHeader"></ng-container>
      </ng-container>
      <ng-container *ngSwitchCase="'month'">
        <ng-container *ngTemplateOutlet="monthModeHeader"></ng-container>
      </ng-container>
      <ng-container *ngSwitchCase="'year'">
        <ng-container *ngTemplateOutlet="yearModeHeader"></ng-container>
      </ng-container>
    </ng-container>
  </ng-template>

  <ng-template #dateModeHeader>
    <div class="nm_date-picker-header__info" nmTrigger>
      <div
        class="nm_date-picker-header__info_month"
        [@click]="headerActions.monthAction.clickObserver$ | async"
        (click)="headerActions.monthAction.onClick()"
      >
        {{ selectedMonth }}
      </div>
      <div
        class="nm_date-picker-header__info_year"
        [@click]="headerActions.yearAction.clickObserver$ | async"
        (click)="headerActions.yearAction.onClick()"
      >
        {{ selectedDate.getFullYear() }}
      </div>
    </div>
    <div class="nm_date-picker-header__controls">
      <button
        [disabled]="headerActions.prevAction.disabled"
        [@click]="headerActions.prevAction.clickObserver$ | async"
        [class.disabled_btn]="headerActions.prevAction.disabled"
        class="nm_date-picker-header_controls__item"
        (click)="headerActions.prevAction.onClick()"
      >
        <ng-container *ngTemplateOutlet="arrowLeft"></ng-container>
      </button>
      <button
        [disabled]="headerActions.nextAction.disabled"
        [class.disabled_btn]="headerActions.nextAction.disabled"
        [@click]="headerActions.nextAction.clickObserver$ | async"
        class="nm_date-picker-header_controls__item"
        (click)="headerActions.nextAction.onClick()"
      >
        <ng-container *ngTemplateOutlet="arrowRight"></ng-container>
      </button>
    </div>
  </ng-template>

  <ng-template #monthModeHeader>
    <div class="nm_month-picker__container" nmTrigger>
      <button
        [disabled]="headerActions.prevAction.disabled"
        [@click]="headerActions.prevAction.clickObserver$ | async"
        [class.disabled_btn]="headerActions.prevAction.disabled"
        class="nm_month-picker__container__control"
        (click)="headerActions.prevAction.onClick()"
      >
        <ng-container *ngTemplateOutlet="arrowLeft"></ng-container>
      </button>
      <div class="nm_month-picker__container__year-value" (click)="headerActions.yearAction.onClick()">
        {{ selectedDate.getFullYear() }}
      </div>
      <button
        [disabled]="headerActions.nextAction.disabled"
        [@click]="headerActions.nextAction.clickObserver$ | async"
        [class.disabled_btn]="headerActions.nextAction.disabled"
        class="nm_month-picker__container__control"
        (click)="headerActions.nextAction.onClick()"
      >
        <ng-container *ngTemplateOutlet="arrowRight"></ng-container>
      </button>
    </div>
  </ng-template>

  <ng-template #yearModeHeader>
    <div class="nm_year-picker__container" nmTrigger>
      <button
        [disabled]="headerActions.prevAction.disabled"
        [@click]="headerActions.prevAction.clickObserver$ | async"
        [class.disabled_btn]="headerActions.prevAction.disabled"
        class="nm_year-picker__container__control"
        (click)="headerActions.prevAction.onClick()"
      >
        <ng-container *ngTemplateOutlet="arrowLeft"></ng-container>
      </button>
      <div class="nm_year-picker__container__year-value">
        {{ yearRangeHeader }}
      </div>
      <button
        [disabled]="headerActions.nextAction.disabled"
        [@click]="headerActions.nextAction.clickObserver$ | async"
        [class.disabled_btn]="headerActions.nextAction.disabled"
        class="nm_year-picker__container__control"
        (click)="headerActions.nextAction.onClick()"
      >
        <ng-container *ngTemplateOutlet="arrowRight"></ng-container>
      </button>
    </div>
  </ng-template>

  <ng-template #arrowLeft>
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M15.75 19.5L8.25 12L15.75 4.5" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
    </svg>
  </ng-template>
  <ng-template #arrowRight>
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M8.25 4.5L15.75 12L8.25 19.5" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
    </svg>
  </ng-template>
</div>
